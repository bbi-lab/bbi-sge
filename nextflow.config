manifest{
    name = 'bbi-sge'
    author = 'Jong Ha Shin'
    homePage = 'https://github.com/bbi/bbi-sge/'
    description = 'Saturation Genome Editing Pipeline'
    mainScript = 'main.nf'
    version = '0.6.5'  

    //manifest.defaultBranch = 'main'
}

profiles {
    standard {
        process {
            beforeScript = 'module load modules modules-init modules-gs python/2.7.13 python/3.7.7 gmp/6.1.2 mpfr/4.0.1 mpc/1.1.0 gcc/8.1.0 bcl2fastq/2.20 fastqc/0.11.7'
            //gs-it to ask to do it
            //beforeScript =  '. /etc/profile.d/modules.sh'

            executor = 'sge'
            queue = 'bbi-sge.q'
            penv = 'serial'
            maxForks = 4
            //clusterOptions = '-l centos=7'
            errorStrategy = 'finish'
            maxErrors = 5
            time = '10d'
            
            //cleanup = true

            withName: bcl2fastq {
                module = 'modules:modules-init:modules-gs:bcl2fastq/2.20'
                cpus = 4
                memory = '16 GB'
                //maxForks = 4
            }
            
            withName: fastqc {
                module = 'modules:modules-init:modules-gs:fastqc/0.11.7'
                cpus = 2
                memory = '8 GB'
                //maxForks = 2
            }
            //seems like taking long increase cpus and memory more than 2 and 8
            withName: seqprep {
                cpus = 2
                memory = '12 GB'
                //maxForks = 2
            }

            withName: trimming {
                cpus = 2
                memory = '4 GB'
            }
            
            withName: rnaseq {
                cpus = 2
                memory = '4 GB'
            }
            
            withName: needle {
                module = 'modules:modules-init:modules-gs:EMBOSS/6.6.0'
                cpus = 4
                memory = '16 GB'
                //maxForks = 4
            }
            
            withName: cigar {
                cpus = 2
                memory = '4 GB'
            }   

            withName: sam_to_edits {
                cpus = 2
                memory = '4 GB'
            }
            
            withName: annotated_variants {
                cpus = 2
                memory = '4 GB'
            }
        }
    }
}

